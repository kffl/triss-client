<div class="container">

  <div class="form">

    <div class="title main-title">
      <span>Wniosek o wyjazd służbowy za granicę</span>
    </div>

    <div class="form-group basic-info">
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Imię i nazwisko</span></mat-label>
        <input matInput #firstNameAndSurname readonly>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Tytuł, stopień naukowy, stanowisko</span></mat-label>
        <input matInput #academicTitle readonly>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Instytut/katedra/wydział</span></mat-label>
        <input matInput #institute readonly>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Telefon kontaktowy</span></mat-label>
        <input matInput #phoneNumber readonly>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Wyjazd do</span></mat-label>
        <mat-hint align="start"><span>Miejscowość, kraj</span></mat-hint>
        <span matPrefix class="asterisk">*</span>
        <input matInput #destination>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Termin wyjazdu</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <mat-date-range-input [rangePicker]="abroadPicker" #abroadDate (click)="abroadPicker.open()">
          <input matStartDate placeholder="Data wyjazdu" readonly>
          <input matEndDate placeholder="Data przyjazdu" readonly>
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="abroadPicker"></mat-datepicker-toggle>
        <mat-date-range-picker #abroadPicker></mat-date-range-picker>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Cel wyjazdu</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <input matInput #purpose>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Nazwa konferencji / Instytucja zapraszająca</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <input matInput #conference>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Temat referatu, autorzy</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <input matInput #subject>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Termin konferencji</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <mat-date-range-input [rangePicker]="conferencePicker" #conferenceDate (click)="conferencePicker.open()">
          <input matStartDate placeholder="Początek" readonly>
          <input matEndDate placeholder="Koniec" readonly>
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="conferencePicker"></mat-datepicker-toggle>
        <mat-date-range-picker #conferencePicker></mat-date-range-picker>
      </mat-form-field>
    </div>

    <div class="title subtitle">
      <span>Źródło finansowania</span>
    </div>

    <div class="form-group financial-source">
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Konto alokacji</span></mat-label>
        <input matInput #allocationAccount disabled>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>MPK</span></mat-label>
        <input matInput #MPK disabled>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Źródło finansowania</span></mat-label>
        <input matInput #financialSource disabled>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Projekt</span></mat-label>
        <input matInput #project disabled>
      </mat-form-field>
    </div>

    <div class="title subtitle">
      <span>Transport</span>
    </div>

    <div class="form-group transport" *ngFor="let transportMean of transportMeansArray">
      <div class="info-text transport-enum"><span>Środek transportu nr {{transportMean}}</span></div>
      <mat-form-field [appearance]="formFieldsStyle">
        <span matPrefix class="asterisk">*</span>
        <mat-label><span>Rodzaj środka transportu</span></mat-label>
        <mat-select #vehicleSelect>
          <mat-option *ngFor="let vehicle of vehicles" [value]="vehicle.value"><span>{{vehicle.name}}</span></mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Trasa</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <input matInput #route>
      </mat-form-field>
      <div class="datetime">
        <mat-form-field [appearance]="formFieldsStyle">
          <span matPrefix class="asterisk">*</span>
          <mat-label><span>Minuta wyjazdu</span></mat-label>
          <mat-select #departureMinuteSelect>
            <mat-option *ngFor="let minute of minutes" [value]="minute"><span>{{minute}}</span></mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field [appearance]="formFieldsStyle">
          <span matPrefix class="asterisk">*</span>
          <mat-label><span>Godzina wyjazdu</span></mat-label>
          <mat-select #departureHourSelect>
            <mat-option *ngFor="let hour of hours" [value]="hour"><span>{{hour}}</span></mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field [appearance]="formFieldsStyle">
          <mat-label>Dzień wyjazdu</mat-label>
          <span matPrefix class="asterisk">*</span>
          <input matInput [matDatepicker]="departurePicker" #departureDate readonly (click)="departurePicker.open()">
          <mat-datepicker-toggle matSuffix [for]="departurePicker"></mat-datepicker-toggle>
          <mat-datepicker #departurePicker></mat-datepicker>
        </mat-form-field>
      </div>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Przewoźnik</span></mat-label>
        <input matInput #carrier>
      </mat-form-field>
    </div>

    <div class="transport-buttons">
      <button mat-stroked-button (click)="incrementTransportMeansNumber()" [disabled]="transportMeansNumber === 100">
        <span>Dodaj kolejny środek transportu</span>
      </button>
      <button mat-stroked-button (click)="decrementTransportMeansNumber()" [disabled]="transportMeansNumber === 1">
        <span>Usuń ostatni środek transportu</span>
      </button>
    </div>

    <div class="title subtitle">
      <span>Ubezpieczenie kosztów leczenia i następstw nieszczęśliwych wypadków</span>
    </div>
    <div class="info-text">
      <span>
        Jeżeli wniosek na wyjazd służbowy zostanie dostarczony do sekcji Współpracy z Zagranicą później niż 4-5 dni przed wyjazdem, pracownik zobowiązany jest ubezpieczyć się sam.
      </span>
    </div>

    <div class="form-group insurance">
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Imię i nazwisko</span></mat-label>
        <input matInput #firstNameAndSurnameInsurance [disabled]="selfInsuredCheckbox.checked" readonly>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label>Data urodzenia</mat-label>
        <input matInput [matDatepicker]="birthPicker" #birthDate [disabled]="selfInsuredCheckbox.checked" readonly>
        <mat-datepicker-toggle matSuffix [for]="birthPicker"></mat-datepicker-toggle>
        <mat-datepicker #birthPicker disabled></mat-datepicker>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Kraj wyjazdu</span></mat-label>
        <span matPrefix class="asterisk" *ngIf="!selfInsuredCheckbox.checked">*</span>
        <input matInput #departureCountry [disabled]="selfInsuredCheckbox.checked">
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Okres pobytu za granicą</span></mat-label>
        <span matPrefix class="asterisk" *ngIf="!selfInsuredCheckbox.checked">*</span>
        <mat-date-range-input [rangePicker]="insurancePicker" [disabled]="selfInsuredCheckbox.checked" #abroadDateInsurance (click)="insurancePicker.open()">
          <input matStartDate placeholder="Początek" readonly>
          <input matEndDate placeholder="Koniec" readonly>
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="insurancePicker"></mat-datepicker-toggle>
        <mat-date-range-picker #insurancePicker></mat-date-range-picker>
      </mat-form-field>
      <mat-checkbox class="example-margin" #selfInsuredCheckbox>
        <span>Ubezpieczę się sam</span>
      </mat-checkbox>
    </div>

    <div class="title subtitle">
      <span>Wniosek o zaliczkę dewizową</span>
    </div>

    <div class="form-group advance-payment-request">
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Na wyjazd do</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <input matInput #requestPaymentDestination>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>W terminie</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <mat-date-range-input [rangePicker]="advancePaymentRequestPicker" #requestPaymentDate (click)="advancePaymentRequestPicker.open()">
          <input matStartDate placeholder="Początek" readonly>
          <input matEndDate placeholder="Koniec" readonly>
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="advancePaymentRequestPicker"></mat-datepicker-toggle>
        <mat-date-range-picker #advancePaymentRequestPicker></mat-date-range-picker>
      </mat-form-field>
      <div class="advance-payment-request-list">
        <mat-form-field [appearance]="formFieldsStyle">
          <mat-label><span>Diety pobytowe: liczba</span></mat-label>
          <span matPrefix class="asterisk">*</span>
          <input digitOnly
                 type="text"
                 inputmode="numeric"
                 [pattern]="integerRegex"
                 matInput
                 (input)="setAmountSum(requestPaymentDays.value, requestPaymentDaysAmount.value, requestPaymentDaysAmountSum)"
                 #requestPaymentDays>
        </mat-form-field>
        <mat-form-field [appearance]="formFieldsStyle">
          <mat-label><span>Kwota diety</span></mat-label>
          <span matPrefix class="asterisk">*</span>
          <input digitOnly
                 type="text"
                 inputmode="numeric"
                 decimal="true"
                 [decimalSeparator]="decimalSeparator"
                 [pattern]="currencyRegex"
                 matInput
                 (input)="setAmountSum(requestPaymentDays.value, requestPaymentDaysAmount.value, requestPaymentDaysAmountSum)"
                 #requestPaymentDaysAmount>
        </mat-form-field>
        <mat-form-field [appearance]="formFieldsStyle">
          <mat-label><span>Razem</span></mat-label>
          <input matInput
                 #requestPaymentDaysAmountSum
                 readonly>
        </mat-form-field>
        <mat-form-field [appearance]="formFieldsStyle">
          <mat-label><span>Noclegi: liczba</span></mat-label>
          <span matPrefix class="asterisk">*</span>
          <input digitOnly
                 type="text"
                 inputmode="numeric"
                 [pattern]="integerRegex"
                 matInput
                 (input)="setAmountSum(requestPaymentAccommodation.value, requestPaymentAccommodationLimit.value, requestPaymentAccommodationSum)"
                 #requestPaymentAccommodation>
        </mat-form-field>
        <mat-form-field [appearance]="formFieldsStyle">
          <mat-label><span>Limit/ryczałt</span></mat-label>
          <span matPrefix class="asterisk">*</span>
          <input digitOnly
                 type="text"
                 inputmode="numeric"
                 decimal="true"
                 [decimalSeparator]="decimalSeparator"
                 [pattern]="currencyRegex"
                 matInput
                 (input)="setAmountSum(requestPaymentAccommodation.value, requestPaymentAccommodationLimit.value, requestPaymentAccommodationSum)"
                 #requestPaymentAccommodationLimit>
        </mat-form-field>
        <mat-form-field [appearance]="formFieldsStyle">
          <mat-label><span>Razem</span></mat-label>
          <input matInput
                 #requestPaymentAccommodationSum
                 readonly>
        </mat-form-field>
        <mat-form-field class="three-columns-form-field" [appearance]="formFieldsStyle">
          <mat-label><span>Dieta dojazdowa</span></mat-label>
          <span matPrefix class="asterisk">*</span>
          <input digitOnly
                 type="text"
                 inputmode="numeric"
                 decimal="true"
                 [decimalSeparator]="decimalSeparator"
                 [pattern]="currencyRegex"
                 (input)="setRequestPaymentSummarizedCosts()"
                 matInput
                 #requestPaymentTravelDiet>
        </mat-form-field>
        <mat-form-field class="three-columns-form-field" [appearance]="formFieldsStyle">
          <span matPrefix class="asterisk">*</span>
          <mat-label><span>Koszty dojazdów środkami komunikacji miejscowej</span></mat-label>
          <input digitOnly
                 type="text"
                 inputmode="numeric"
                 decimal="true"
                 [decimalSeparator]="decimalSeparator"
                 [pattern]="currencyRegex"
                 (input)="setRequestPaymentSummarizedCosts()"
                 matInput
                 #requestPaymentLocalTransportCosts>
        </mat-form-field>
        <mat-form-field class="two-columns-form-field" [appearance]="formFieldsStyle">
          <mat-label><span>Inne wydatki</span></mat-label>
          <span matPrefix class="asterisk">*</span>
          <textarea matInput [placeholder]="'Tu opisz inne wydatki'" #requestPaymentOtherExpensesDescription></textarea>
        </mat-form-field>
        <mat-form-field [appearance]="formFieldsStyle">
          <mat-label><span>Kwota</span></mat-label>
          <span matPrefix class="asterisk">*</span>
          <input digitOnly
                 type="text"
                 inputmode="numeric"
                 decimal="true"
                 [decimalSeparator]="decimalSeparator"
                 [pattern]="currencyRegex"
                 (input)="setRequestPaymentSummarizedCosts()"
                 matInput
                 #requestPaymentOtherExpensesValue>
        </mat-form-field>
        <mat-form-field class="three-columns-form-field" [appearance]="formFieldsStyle">
          <mat-label><span>Sumaryczna kwota wnioskowanej zaliczki</span></mat-label>
          <input matInput #requestPaymentSummarizedCosts readonly>
        </mat-form-field>
      </div>
    </div>

    <div class="title subtitle">
      <span>Przedpłaty</span>
    </div>
    <div class="info-text">
      <span>
        Dokonanie przedpłaty jest jednocześnie zobowiązaniem do dostarczenia prawidłowo wystawionej faktury do sekcji Współpracy z Zagranicą najpóźniej w dniu rozliczenia z wyjazdu.
      </span>
    </div>

    <div class="form-group advance-payments">
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Opłata konferencyjna</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <input digitOnly
               type="text"
               inputmode="numeric"
               decimal="true"
               [decimalSeparator]="decimalSeparator"
               [pattern]="currencyRegex"
               matInput
               [placeholder]="'Tu wpisz wielkość opłaty'"
               #conferenceFeeValue>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Forma zapłaty</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <mat-select #conferenceFeePaymentTypeSelect>
          <mat-option *ngFor="let paymentType of paymentTypes" [value]="paymentType.value"><span>{{paymentType.name}}</span></mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Depozyt hotelowy/zakwaterowanie</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <input digitOnly
               type="text"
               inputmode="numeric"
               decimal="true"
               [decimalSeparator]="decimalSeparator"
               [pattern]="currencyRegex"
               matInput
               [placeholder]="'Tu wpisz wielkość depozytu'"
               #depositValue>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Forma zapłaty</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <mat-select #depositPaymentTypeSelect>
          <mat-option *ngFor="let paymentType of paymentTypes" [value]="paymentType.value"><span>{{paymentType.name}}</span></mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="title subtitle">
      <span>Seria i numer dokumentu tożsamości wyjeżdzającego za granicę</span>
    </div>

    <div class="form-group identity-document">
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Rodzaj dokumentu</span></mat-label>
        <span matPrefix class="asterisk">*</span>
        <mat-select #identityDocumentTypeSelect (selectionChange)="onIdChange($event.value)">
          <mat-option *ngFor="let identityDocument of identityDocuments" [value]="identityDocument.value"><span>{{identityDocument.name}}</span></mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Seria i numer</span></mat-label>
        <input matInput #identityDocumentSerialNumber readonly>
      </mat-form-field>
    </div>

    <div class="title subtitle">
      <span>Uwagi</span>
    </div>

    <div class="form-group comments">
      <mat-form-field [appearance]="formFieldsStyle">
        <mat-label><span>Tu wpisz swoje uwagi</span></mat-label>
        <textarea matInput #comments></textarea>
      </mat-form-field>
    </div>

    <div class="outcome-buttons">
      <a><button mat-flat-button color="primary">
        <span>Anuluj</span>
      </button></a>
      <a><button (click)="submitForm()" mat-flat-button color="primary">
        <span>Wyślij wniosek</span>
      </button></a>
    </div>
  </div>
</div>
